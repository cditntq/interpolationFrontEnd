/*! ntq by QL QL 2017-05-21 17:05:48 */
"use strict";function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(window){var FunUtil={},PageInfo={};FunUtil.init=function(){String.HasText=function(a){return void 0!==a&&(null!=a&&("null"!=a&&("undefined"!=a&&("string"==typeof a&&(a=a.replace(/(^\s*)|(\s*$)/g,"")),""!==a))))}},FunUtil.init(),FunUtil.common4getUrlParam=function(){var a=location.href,b={};if(-1!=a.indexOf("?"))for(var c=a.split("?")[1],d=c.split("&"),e=0;e<d.length;e++)b[d[e].split("=")[0]]=unescape(d[e].split("=")[1]);return b},FunUtil.common4Prop=function(a){var b={};return b.isIN=function(){return a.in in a.obj},b[a.type]()},FunUtil.common4class=function(a){var b=a,c=function(){function a(b){_classCallCheck(this,a)}return _createClass(a,[{key:"data",value:function(){}},{key:"init",value:function(){console.log("init")}},{key:"update",value:function(){}},{key:"show",value:function(){console.log("show")}},{key:"hide",value:function(){console.log("hide")}},{key:"destory",value:function(){}}]),a}();return new(function(a){function c(a){return _classCallCheck(this,c),_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a))}return _inherits(c,a),_createClass(c,[{key:"data",value:function(){if(_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"data",this).call(this),FunUtil.common4Prop({type:"isIN",in:"data",obj:b}))return b.data()}},{key:"init",value:function(){_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"init",this).call(this),FunUtil.common4Prop({type:"isIN",in:"init",obj:b})&&b.init()}},{key:"update",value:function(){_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"update",this).call(this),FunUtil.common4Prop({type:"isIN",in:"update",obj:b})&&b.update()}},{key:"show",value:function(){if(_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"show",this).call(this),FunUtil.common4Prop({type:"isIN",in:"show",obj:b})){var a=new function(){for(var a in FunUtil.Global.Page.require)this[a]=FunUtil.Global.Page.require[a]};b.show.call(a,"var")}}},{key:"hide",value:function(){_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"hide",this).call(this),FunUtil.common4Prop({type:"isIN",in:"hide",obj:b})&&b.hide()}},{key:"destory",value:function(){_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"destory",this).call(this),FunUtil.common4Prop({type:"isIN",in:"destory",obj:b})&&b.destory()}}]),c}(c))},FunUtil.model4dep=function(a){function b(){k=a.charAt(n++)}function c(){return/\s/.test(k)}function d(){return'"'==k||"'"==k}function e(){var c=n,d=k,e=a.indexOf(d,c);if(-1==e)n=o;else if("\\"!=a.charAt(e-1))n=e+1;else for(;n<o;)if(b(),"\\"==k)n++;else if(k==d)break;q&&(r.push(a.substring(c,n-1)),q=0)}function f(){for(n--;n<o;)if(b(),"\\"==k)n++;else{if("/"==k)break;if("["==k)for(;n<o;)if(b(),"\\"==k)n++;else if("]"==k)break}}function g(){return/[a-z_$]/i.test(k)}function h(){var b=a.slice(n-1),c=/^[\w$]+/.exec(b)[0];s={if:1,for:1,while:1,with:1}[c],p={break:1,case:1,continue:1,debugger:1,delete:1,do:1,else:1,false:1,if:1,in:1,instanceof:1,return:1,typeof:1,void:1}[c],m="return"==c,l={instanceof:1,delete:1,void:1,typeof:1,return:1}.hasOwnProperty(c),q=/^require\s*(?:\/\*[\s\S]*?\*\/\s*)?\(\s*(['"]).+?\1\s*[),]/.test(b),q?(c=/^require\s*(?:\/\*[\s\S]*?\*\/\s*)?\(\s*['"]/.exec(b)[0],n+=c.length-2):n+=/^[\w$]+(?:\s*\.\s*[\w$]+)*/.exec(b)[0].length-1}function i(){return/\d/.test(k)||"."==k&&/\d/.test(a.charAt(n))}function j(){var b,c=a.slice(n-1);b="."==k?/^\.\d+(?:E[+-]?\d*)?\s*/i.exec(c)[0]:/^0x[\da-f]*/i.test(c)?/^0x[\da-f]*\s*/i.exec(c)[0]:/^\d+\.?\d*(?:E[+-]?\d*)?\s*/i.exec(c)[0],n+=b.length-1,p=0}if(-1==a.indexOf("require"))return[];for(var k,l,m,n=0,o=a.length,p=1,q=0,r=[],s=0,t=[],u=[];n<o;)if(b(),c())!m||"\n"!=k&&"\r"!=k||(l=0,m=0);else if(d())e(),p=1,m=0,l=0;else if("/"==k)if(b(),"/"==k)-1==(n=a.indexOf("\n",n))&&(n=a.length);else if("*"==k){var v=a.indexOf("\n",n);n=a.indexOf("*/",n),-1==n?n=o:n+=2,m&&-1!=v&&v<n&&(l=0,m=0)}else p?(f(),p=0,m=0,l=0):(n--,p=1,m=0,l=1);else if(g())h();else if(i())j(),m=0,l=0;else if("("==k)t.push(s),p=1,m=0,l=1;else if(")"==k)p=t.pop(),m=0,l=0;else if("{"==k)m&&(l=1),u.push(l),m=0,p=1;else if("}"==k)l=u.pop(),p=!l,m=0;else{var w=a.charAt(n);";"==k?l=0:"-"==k&&"-"==w||"+"==k&&"+"==w||"="==k&&">"==w?(l=0,n++):l=1,p="]"!=k,m=0}return r},FunUtil.common4openUrl=function(a){var b=a.url;if(String.HasText(b)){var c="until-open-url",d=$("#"+c);d.length<=0&&$("body").append('<a style="color: #f6f6f6;"><span id="'+c+'" >a</span></a>'),d=$("#"+c);var e=d.closest("a");if(FunUtil.Global.Router)e.attr("href","#/"+b).attr("target","_self");else{b=b.replace(/\//g,"-");var f=b.split("?");b=1==f.length?f[0]+".html":f[0]+".html?"+f[1],e.attr("href",b).attr("target","_self")}d.click(),setTimeout(function(){e.remove()},200)}},FunUtil.common4cache=function(a){var b={},c=a.key,d=a.value,e=a.model;return String.HasText(e)||(e=""),b.setItem=function(){"lo"==e?localStorage.setItem(c,d):sessionStorage.setItem(c,d)},b.getItem=function(){var a="";return a="lo"==e?localStorage.getItem(c):sessionStorage.getItem(c),String.HasText(a)&&(a=JSON.parse(a)),a},b[a.type+"Item"]()},FunUtil.Global={plug4require:[]},FunUtil.common4Stack=function(a){var b={};b.pub=function(){},b.hash=function(){},b.history=function(){},b.page=function(){},b[a.type]()},FunUtil.common4hash=function(a){var b=a.key,c={};return c.encode=function(){return b.replace(/\#/g,"Qlive").replace(/\//g,"-")},c.decode=function(){return b.replace(/\Qlive/g,"#").replace(/-/g,"/")},c.js=function(){return c.decode().replace(/#/g,"")},c[a.type]()},FunUtil.common4Page=function(a){var b={global:{type:"single"}};b.common4getJS=function(){},b.single=function(){var a=FunUtil.Global.Page,b=a.require,c=[],d=[],e=[],f=[],g=[];for(var h in b)c.push(h),d.push(b[h]);for(var i=c.length,j=0;j<i;j++)e.push(FunUtil.common4require(d[j]));var k=function(a){for(var b=g.length-1,c={},d=b;d>-1;d--){var e=g[d];e.k!=a&&void 0!==e.k||(c=e.v)}return c};Promise.all(e).then(function(b){FunUtil.Global.Page.require={};for(var d=[],e=function b(c){for(var d=(c.name,c.info),e=d.length,h=[],i=0;i<e;i++)h.push(FunUtil.common4require(d[i]));Promise.all(h).then(function(c){for(var d=c.length,e=[],h=0;h<d;h++){g.push({k:FunUtil.Global.plug4list[h],v:c[h]});var i=FunUtil.model4dep(c[h].toString());i.length;0==i.length?g.push({k:i[h],v:c[h]}):e=e.concat(i)}if(0==e.length){for(var j=a,l=g.length-1,h=l;h>-1;h--){var m=g[h];g[h].v=m.v(k)}for(var n=0;n<f.length;n++)FunUtil.Global.Page.require[f[n]]=g[n].v;j.init(),j.show()}else FunUtil.Global.plug4list=e,b({name:"",info:e})})},h=0;h<i;h++){var j=b[h];if(String.HasText(j)){var l=FunUtil.model4dep(j.toString());0==l.length?FunUtil.Global.Page.require[c[h]]=j():(g.push({k:c[h],v:j}),f.push(c[h]),FunUtil.Global.plug4list=l,d=d.concat(l))}}if(0==d.length){var m=a;m.init(),m.show(),console.log(d)}else FunUtil.Global.plug4list=d,e({name:"",info:d})})},b.model=function(){a.jid=a.jid.split("?")[0];var b=$("#"+FunUtil.Global.id),c=FunUtil.Global.Router;c.unshift({});var d=a.jid,e=c.findIndex(function(a,b,c){if(a.jid==d)return b})-1,f=c.findIndex(function(a,b,c){if("show"==a.state)return b})-1;c.shift();var g=c[e],h="noPre",i={};i.pub=function(a){var c={},f="/"+FunUtil.common4hash({type:"js",key:d+""});c.getJs=function(){Promise.resolve(FunUtil.common4require(f)).then(function(a){var c=a.require,f=[],g=[],h=[],i=[],j=[];for(var k in c)f.push(k),g.push(c[k]);for(var l=f.length,m=0;m<l;m++)h.push(FunUtil.common4require(g[m]));var n=function(a){for(var b=j.length-1,c={},d=b;d>-1;d--){var e=j[d];e.k!=a&&void 0!==e.k||(c=e.v)}return c};Promise.all(h).then(function(c){for(var g=[],h=function c(f){for(var g=(f.name,f.info),h=g.length,k=[],l=0;l<h;l++)k.push(FunUtil.common4require(g[l]));Promise.all(k).then(function(f){for(var g=f.length,h=[],k=0;k<g;k++){j.push({k:FunUtil.Global.plug4list[k],v:f[k]});var l=FunUtil.model4dep(f[k].toString());l.length;0==l.length?j.push({k:l[k],v:f[k]}):h=h.concat(l)}if(0==h.length){for(var m=a,o=j.length-1,k=o;k>-1;k--){var p=j[k];j[k].v=p.v(n)}for(var q=0;q<i.length;q++)FunUtil.Global.Page.require[i[q]]=j[q].v;FunUtil.Global.Router[e].page=m,FunUtil.Global.Router[e].state="show",b.append('<div class="'+d+'">'+m.data().HtmUtil.layout()+"</div").show(),console.log(FunUtil.Global.Router[e].jid),m.init(),m.show()}else FunUtil.Global.plug4list=h,c({name:"",info:h})})},k=0;k<l;k++){var m=c[k];if(String.HasText(m)){var o=FunUtil.model4dep(m.toString());0==o.length?FunUtil.Global.Page.require[f[k]]=m:(j.push({k:f[k],v:m}),i.push(f[k]),FunUtil.Global.plug4list=o,g=g.concat(o))}}if(0==g.length){var p=a;FunUtil.Global.Router[e].page=p,FunUtil.Global.Router[e].state="show",b.append('<div class="'+d+'">'+p.data().HtmUtil.layout()+"</div").show(),console.log(FunUtil.Global.Router[e].jid),p.init(),p.show(),console.log(g)}else FunUtil.Global.plug4list=g,h({name:"",info:g})})},function(a){})},c.getJs()},i.noPre=function(){String.HasText(g.page)?(g.page.show(),g.state="show",FunUtil.Global.Router[e]=g,b.find("div."+d).show()):i.pub()},i.hasPre=function(){var a=c[f];console.log(a.jid),a.page.hide(),a.state="hide",FunUtil.Global.Router[f]=a,b.find("div."+a.jid).hide(),String.HasText(g.page)?(console.log(g.jid),g.page.show(),g.state="show",FunUtil.Global.Router[e]=g,b.find("div."+g.jid).show()):i.pub()},String.HasText(f)&&f>-1&&(h="hasPre"),i[h]()},String.HasText(FunUtil.Global.Router)&&(b.global.type="model"),b[b.global.type]()},FunUtil.register4Evet=function(a){var b={};b.pub=function(){},b.hash=function(){var a=function(){var a=FunUtil.common4hash({type:"decode",key:FunUtil.Global.Router[0].jid}),b=a,c=location.hash;if(String.HasText(location.hash)){var d=c.split("?")[0];d=d.substring(2);var e=FunUtil.Global.Jids[d];String.HasText(e)&&(b="#"+e)}FunUtil.common4Page({jid:FunUtil.common4hash({type:"encode",key:b})})};window.onhashchange=function(b){a()},String.HasText(FunUtil.Global.Router)&&a()},b.history=function(){},b[a.type]()},FunUtil.common4GetJS=function(data){var vnum="0000";try{vnum=v4num}catch(e){vnum="0000"}var request=function request(callback){var xmlhttp=null;if(window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:window.ActiveXObject&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),null===xmlhttp)return void alert("不支持咯");xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(String.HasText(FunUtil.Global.Router)&&0==FunUtil.Global.debug&&FunUtil.common4cache({type:"set",key:xmlhttp.responseURL,value:JSON.stringify({vnum:vnum,js:xmlhttp.responseText}),model:"lo"}),eval(xmlhttp.responseText),data.callback())},xmlhttp.open("GET",data.url,!0),xmlhttp.send(null)};if(String.HasText(FunUtil.Global.Router)){var ljs=FunUtil.common4cache({type:"get",key:data.url,model:"lo"});if(String.HasText(ljs)&&ljs.vnum==vnum)return eval(ljs.js),void data.callback()}request()},FunUtil.common4require=function(a){return new Promise(function(b){var c=FunUtil.Global.config().paths,d=FunUtil.Global.config().other,e="normal",f=location.origin+"/"+location.pathname.split("/")[1]+a+".js";FunUtil.common4Prop({type:"isIN",in:a,obj:c})&&(f=c[a]),FunUtil.common4Prop({type:"isIN",in:a,obj:d})&&(f=d[a],e="other");var g={url:f};if("normal"==e)FunUtil.common4GetJS({url:f,async:"async",callback:function(a){b(f.indexOf("common")>=0||f.indexOf("plug")>=0?FunUtil.Global.plug:FunUtil.Global.Page)}});else{var h=document.createElement("script");h.type="text/javascript",h.src=g.url,h.async=String.HasText(g.async)?g.async:"async",document.head.appendChild(h),h.onload=h.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||b("")}}})},FunUtil.common4Router=function(a){var b=a,c=b.flag,d=[],e=[],f=[];for(var g in b.list)d.push(g),e.push(b.list[g]);var h=d.length;for(var g in b.list)d.push(g),e.push(b.list[g]);var h=d.length;if("hash"==c)for(var i=0;i<h;i++)f.push({id:FunUtil.common4hash({type:"encode",key:d[i]}),jid:FunUtil.common4hash({type:"encode",key:"#"+e[i]}),page:"",state:""});FunUtil.Global.Router=f,FunUtil.Global.Jids=b.list,FunUtil.register4Evet({type:c})},FunUtil.common4Global=function(a){FunUtil.Global.id=a.id,FunUtil.Global.name=a.name,FunUtil.Global.debug=a.debug},PageInfo.init4plug=function(a){FunUtil.Global.plug=a.info},PageInfo.init4Obj=function(a){var b=a.info();FunUtil.Global.Page=FunUtil.common4class(b.page()),FunUtil.Global.Page.require=b.require,String.HasText(FunUtil.Global.Router)||FunUtil.common4Page()},PageInfo.init4Start=function(a){var b={};b.getJs=function(a){var b=a.require,c=[],d=[],e=[];for(var f in b)c.push(f),d.push(b[f]);for(var g=c.length,h=0;h<g;h++)e.push(FunUtil.common4require(d[h]));Promise.all(e).then(function(b){b[0](),FunUtil.common4Global(a.Global),FunUtil.common4Router(a.Router);var d=new function(){for(var a=0;a<g;a++)this[c[a]]=b[a]};a.Pub.call(d,"var")})},b.getJs(a.info())},PageInfo.init4config=function(a){FunUtil.Global.config=a.info},PageInfo.register=function(a){PageInfo["init4"+a.type](a)},PageInfo.FunUtil=FunUtil,window.PageInfo=PageInfo}(window);